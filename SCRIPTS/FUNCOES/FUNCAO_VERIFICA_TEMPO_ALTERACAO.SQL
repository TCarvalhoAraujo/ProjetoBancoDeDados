DELIMITER $$
CREATE FUNCTION VERIFICAR_TEMPO_ALTERACAO (ID_ARQUIVO_TEMPO_ALTERACAO INT)
RETURNS BOOLEAN
DETERMINISTIC
BEGIN
	DECLARE DIAS_DIFF INT;
    
    SELECT DATEDIFF(CURDATE(), DATA_MODIFICACAO) INTO DIAS_DIFF
    FROM ARQUIVO
    WHERE ID_ARQUIVO = ID_ARQUIVO_TEMPO_ALTERACAO;
    
    IF DIAS_DIFF IS NULL THEN
		SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Arquivo n√£o encontrado';
	ELSE        
		IF DIAS_DIFF < 100 THEN
			RETURN FALSE;
		ELSE
			RETURN TRUE;
		END IF;
	END IF;
END $$
DELIMITER ;
