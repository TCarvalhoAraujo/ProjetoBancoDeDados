-- 1. Compartilhar um arquivo
INSERT INTO COMPARTILHAR (ID_DONO, ID_ARQUIVO, ID_RECEPTOR, DATA_COMPARTILHAMENTO)
VALUES (@ID_DONO, @ID_ARQUIVO, @ID_RECEPTOR, NOW(DATA_COMPARTILHAMENTO));

-- 2. Mostrar os arquivos que um usuario compartilhou
SELECT 
    ARQUIVO.NOME AS NOME_ARQUIVO, 
    ARQUIVO.TIPO AS TIPO, 
    COMPARTILHAR.DATA_COMPARTILHAMENTO AS DATA_COMPARTILHAMENTO,
    COMPARTILHAR.ID_RECEPTOR AS ID_RECEPTOR
FROM COMPARTILHAR
JOIN ARQUIVO ON COMPARTILHAR.ID_ARQUIVO = ARQUIVO.ID_ARQUIVO
WHERE COMPARTILHAR.ID_DONO = @ID_DONO;

-- 3. Mostrar os arquivos que um usuario recebeu
SELECT 
    ARQUIVO.NOME AS NOME_ARQUIVO, 
    ARQUIVO.TIPO AS TIPO, 
    COMPARTILHAR.DATA_COMPARTILHAMENTO AS DATA_RECEBIMENTO,
    COMPARTILHAR.ID_DONO AS ID_DONO
FROM COMPARTILHAR
JOIN ARQUIVO ON COMPARTILHAR.ID_ARQUIVO = ARQUIVO.ID_ARQUIVO
WHERE COMPARTILHAR.ID_RECEPTOR = @ID_USUARIO;

