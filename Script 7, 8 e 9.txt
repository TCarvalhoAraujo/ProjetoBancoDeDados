-- 7. Compartilhar um arquivo
INSERT INTO COMPARTILHAR (ID_DONO, ID_ARQUIVO, ID_RECEPTOR, DATA_COMPARTILHAMENTO)
VALUES (@ID_DONO, @ID_ARQUIVO, @ID_RECEPTOR, NOW(DATA_COMPARTILHAMENTO));

-- 8. Mostrar os arquivos que um usuário compartilhou com o nome do receptor
SELECT 
    ARQUIVO.NOME AS NOME_ARQUIVO, 
    ARQUIVO.TIPO AS TIPO, 
    COMPARTILHAR.DATA_COMPARTILHAMENTO AS DATA_COMPARTILHAMENTO,
    USUARIO.LOGIN AS NOME_RECEPTOR
FROM COMPARTILHAR
JOIN ARQUIVO ON COMPARTILHAR.ID_ARQUIVO = ARQUIVO.ID_ARQUIVO
JOIN USUARIO ON COMPARTILHAR.ID_RECEPTOR = USUARIO.ID_USUARIO
WHERE COMPARTILHAR.ID_DONO = @ID_DONO;

-- 9. Mostrar os arquivos que um usuário recebeu com o nome do dono
SELECT 
    ARQUIVO.NOME AS NOME_ARQUIVO, 
    ARQUIVO.TIPO AS TIPO, 
    COMPARTILHAR.DATA_COMPARTILHAMENTO AS DATA_RECEBIMENTO,
    USUARIO.LOGIN AS NOME_DONO
FROM COMPARTILHAR
JOIN ARQUIVO ON COMPARTILHAR.ID_ARQUIVO = ARQUIVO.ID_ARQUIVO
JOIN USUARIO ON COMPARTILHAR.ID_DONO = USUARIO.ID_USUARIO
WHERE COMPARTILHAR.ID_RECEPTOR = @ID_USUARIO;
ID_ARQUIVO
WHERE COMPARTILHAR.ID_RECEPTOR = @ID_USUARIO;
